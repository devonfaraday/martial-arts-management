<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <head>
        <title>Edit Student</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>

    <body class="bg-gray-100 min-h-screen flex flex-col">
        <!-- Header -->
        <header th:replace="~{layout/header :: header}"></header>

        <!-- Main Content -->
        <main class="flex-grow flex items-center justify-center p-6">
            <div class="bg-white shadow-md rounded-lg w-full max-w-4xl p-8">
                <!-- Page Title -->
                <h1 class="text-2xl font-bold text-blue-600 mb-6 text-center">Edit Student</h1>

                <!-- Edit Student Form -->
                <form th:action="@{/students/edit/{id}(id=${student.id})}" th:object="${student}" method="post"
                    class="space-y-6">
                    <!-- Personal Information -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Personal Information</h2>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700">First
                                    Name</label>
                                <input type="text" id="firstName" th:field="*{firstName}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" id="lastName" th:field="*{lastName}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="email" th:field="*{email}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="phoneNumber" class="block text-sm font-medium text-gray-700">Phone</label>
                                <input type="text" id="phoneNumber" th:field="*{phoneNumber}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>
                        </div>
                    </div>

                    <!-- Address -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Home Address</h2>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="homeAddress.street"
                                    class="block text-sm font-medium text-gray-700">Street</label>
                                <input type="text" id="homeAddress.street" th:field="*{homeAddress.street}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="homeAddress.city"
                                    class="block text-sm font-medium text-gray-700">City</label>
                                <input type="text" id="homeAddress.city" th:field="*{homeAddress.city}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="homeAddress.state"
                                    class="block text-sm font-medium text-gray-700">State</label>
                                <input type="text" id="homeAddress.state" th:field="*{homeAddress.state}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="homeAddress.zipCode" class="block text-sm font-medium text-gray-700">ZIP
                                    Code</label>
                                <input type="text" id="homeAddress.zipCode" th:field="*{homeAddress.zipCode}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="homeAddress.country"
                                    class="block text-sm font-medium text-gray-700">Country</label>
                                <input type="text" id="homeAddress.country" th:field="*{homeAddress.country}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>
                        </div>
                    </div>

                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Billing Information</h2>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="billingInfo.cardNumber" class="block text-sm font-medium text-gray-700">Card
                                    Number</label>
                                <input type="text" id="billingInfo.cardNumber" th:field="*{billingInfo.cardNumber}"
                                    required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.cardHolderName"
                                    class="block text-sm font-medium text-gray-700">Cardholder Name</label>
                                <input type="text" id="billingInfo.cardHolderName"
                                    th:field="*{billingInfo.cardHolderName}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.expirationDate"
                                    class="block text-sm font-medium text-gray-700">Expiration Date</label>
                                <input type="text" id="billingInfo.expirationDate"
                                    th:field="*{billingInfo.expirationDate}" placeholder="MM/YY" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.securityCode"
                                    class="block text-sm font-medium text-gray-700">Security Code (CVV)</label>
                                <input type="text" id="billingInfo.securityCode" th:field="*{billingInfo.securityCode}"
                                    required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.billingStreet"
                                    class="block text-sm font-medium text-gray-700">Billing Street</label>
                                <input type="text" id="billingInfo.billingStreet"
                                    th:field="*{billingInfo.billingStreet}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.billingCity"
                                    class="block text-sm font-medium text-gray-700">Billing City</label>
                                <input type="text" id="billingInfo.billingCity" th:field="*{billingInfo.billingCity}"
                                    required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.billingState"
                                    class="block text-sm font-medium text-gray-700">Billing State</label>
                                <input type="text" id="billingInfo.billingState" th:field="*{billingInfo.billingState}"
                                    required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <div>
                                <label for="billingInfo.billingZipCode"
                                    class="block text-sm font-medium text-gray-700">Billing ZIP Code</label>
                                <input type="text" id="billingInfo.billingZipCode"
                                    th:field="*{billingInfo.billingZipCode}" required
                                    class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" />
                            </div>

                            <!-- Emergency Contacts -->
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800 mb-4">Emergency Contacts</h2>

                                <!-- Iterate over emergency contacts -->
                                <div th:each="contact, iterStat : ${student.emergencyContacts}" class="">
                                    <h3>Contact [[${iterStat.index + 1}]]:</h3>

                                    <!-- Contact Name -->
                                    <label for="${contact.name}" class="">Name:</label>
                                    <input type="text" id="contactName"
                                        th:field="*{emergencyContacts[__${iterStat.index}__].name}"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                                        required />

                                    <!-- Relationship -->
                                    <label for="relationship"
                                        class="block text-sm font-medium text-gray-700 mt-4">Relationship</label>
                                    <input type="text" id="relationship"
                                        th:field="*{emergencyContacts[__${iterStat.index}__].relationship}"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                                        required />

                                    <!-- Phone Number -->
                                    <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mt-4">Phone
                                        Number</label>
                                    <input type="text" id="phoneNumber"
                                        th:field="*{emergencyContacts[__${iterStat.index}__].phoneNumber}"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                                        required />

                                    <!-- Email -->
                                    <label for="email"
                                        class="block text-sm font-medium text-gray-700 mt-4">Email</label>
                                    <input type="email" id="email"
                                        th:field="*{emergencyContacts[__${iterStat.index}__].email}"
                                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                                        required />

                                </div>
                                <!-- Submit Buttons -->
                                <div class="flex justify-end items-center">
                                    <button type="submit"
                                        class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-700 transition duration-300">
                                        Save
                                    </button>
                                    <a th:href="@{/students}"
                                        class="ml-4 bg-gray-600 text-white px-6 py-2 rounded-lg shadow hover:bg-gray-700 transition duration-300">
                                        Back to List
                                    </a>
                                    <a th:href="@{/students/delete/{id}(id=${student.id})}"
                                        class="bg-red-600 text-white px-3 py-1 rounded-lg shadow hover:bg-red-700 transition duration-300"
                                        onclick="return confirm('Are you sure you want to delete this student?');">
                                        Delete
                                    </a>
                                </div>

                </form>
    </body>

</html>